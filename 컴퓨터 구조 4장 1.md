# 캐시 기억장치

## 1. 컴퓨터 기억장치 시스템 개요

### 1. 메모리의 역할
* 프로그램 명령이나 데이터를 저장

### 2. 메모리는 프로그램의 작업장
  * 메인메모리는 현재 실행중인 프로그램들을 저장한다.
  * 메모리의 영역은 서로 침범하지 못하도록 시스템 소프트웨어의 프로그래머가 정함
  
### 3. 용량
* 내부 기억장치 용량은 바이트 또는 Word단위로 표현
* 외부 기억장치는 일반적으로 바이트를 사용.

### 4. 전송 단위
 * 내부 기억장치에서는 데이터 선들의 수(폭) 과 같다.  
 * 외부 기억장치는 단어보다 큰 단위Block으로 전송한다.

**주소지정단위**
* 주소의 길이 A비트 , 주소지정 단위의 수 N개 는 2^A = N이다. 

### 5. 데이터 액세스 방식

* 순차적(Sequential) - 외부기억장치
  * 처음부터 순서대로 액세스를 진행하다가 찾는 방식
  * Ex) 음악 테이프 같은 식, 백업용으로 사용한다고 하심.
  * 레코드가 저장되어 있는 위치에 따라 액세스 시간이 달라짐

* 직접(Direct) - 외부기억장치
  * 하드디스크나, 광학디스크
  * 회전 하면서 안쪽 이나 바깥쪽으로 이동하면서 트랙과 섹터를 찾는 방법
  * 액세스 시간이 위치에 따라 다르다
  
* 임의(ramdom) - 내부기억장치
  * 특정한 데이터를 가리키는 것을 주소 선으로 나타낸 것
  * **위치와 상관없이 액세스 시간은 똑같다.** -> 데이터 위치가 어디에 있든 걸리는 시간이 똑같다.
  
* 연관(Associative) - 캐시에 사용
  * 단어 내의 특정 비트들과 원하는 비트들을 비교하여 일치하는 단어를 액세스 하는 방식

### 6. 성능

#### 1. 액세스 시간
기억장치의 종류에 따라서 액세스하는데 걸리는 시간이 다 다르다.
* 임의 액세스 기억장치
  * 액세스 시간이 모든 기억장치에서 동일하다 ex) 캐시 or 임의 액세스 방식
* 비임의 액세스 기억장치
  * 데이터가 저장되어 있는 위치에 따라 다르다.

#### 2. 기억장치 사이클 시간

#### 3. 전송율
데이터가 기억장치로 전송되어 들어가 나오는 비율
* 임의 액세스 기억장치 = 1 / 사이클 시간 * 버스의 폭
* 비임의 액세스 기억장치에서 데이터 전송에 소요되는 시간 = 평균 액세스 시간 + 비트들수 / 정송률

### 7. 물리적 유형에 따른 기억장치
  * 반도체 : Ram
  * 자기 : 디스크
  * 광 
  
### 8. 기억장치의 물리적인 특징
  * 휘발성 - 주기억장치 : 전기신호가 끊기면 데이터가 사라짐
  * 삭제가능여부 - ROM에 있는 데이터는 삭제 불가
  
### 9. 기억장치 특징들
  * 액세스 속도가 빠를수록, 비트당 가격이 높아짐
  * 용량이 커질수록, 비트당 가격은 낮아짐
  * 용량이 커질수록, 액세스 속도는 느려짐
  * 캐시를 크게 못하는 이유가 동작자체가 느려지는 경향이 있음.(물리적인 한계)
  
예제 4.1 
* 레벨 1은 1,000개의 단어를 저장하며 액세스 시간은 0.01us
* 레벨 2는 100,000 개의 단어를 저장하며 액세스 시간은 0.1us
<br> 
95% 가 레벨1에 있을때 단어를 액세스 하는데 걸리는 시간은?
<br>
95% X 0.01 + 5% X (0.1 + 0.01) = 0.015 us 시간걸림

### 10. 2단계 기억장치의 성능 개선 원리
* 참조의 지역성
  * 순차적으로 프로그램이 진행된다.
  * 반복 구조는 여러 반복되는 비교적 적은 수의 명령어로 구성
  * 메인 메모리에서 캐시로 데이터를 보낼때 한꺼번에 뭉텅이로 데이터를 보내 원하는 데이터가 인근에 몰려있음.
  
* 공간적 지역성
  * 데이터들이 공간적으로 대게 몰려 있다.
  * 명령어들이 순서대로 실행될 때 공간에 연관 데이터 몰림
* 시간적 지역성
  * 최근에 사용한 명령어를 호출하는 경향이 크다
  
## 2. 캐시 기억장치의 원리

## 3. 캐시 설계의 요소들

### 1. 캐시 주소
* 논리적 캐시(가상 캐시)
![논리적](./Image/3/3-1.JPG)
  * 프로세서가 캐시에 가서 가상 주소를 이용함
  * MMU(memory management unit)를 이용해 논리적인 주소를 실제주소로 변환해서 나간다.
  * 장점 - 물리적 캐시보단 빠르다
  * 단점 - 다른 영역의 주소들중에서 같은 가상주소를 사용할 수 있음
* 물리적 캐시
* 캐시의 주소가 메인메모리에 보내는 주소가 같다. 
![물리적](./Image/3/3-2.JPG)
